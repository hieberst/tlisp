% $Id: tlisp.tex,v 1.5 2012-12-23 21:55:14 steffen Exp $
%
% !TeX encoding = latin9
% !TeX program = pdfLaTeX+MakeIndex+BibTeX

\documentclass[11pt,a4paper,titlepage]{article}

\usepackage[german]{babel}
\usepackage{bibgerm}
\usepackage[latin9]{inputenc}
\usepackage{makeidx}
	\makeindex
\usepackage{nomencl}
	\makeglossary
\usepackage{graphicx}
\usepackage[colorlinks=true,urlcolor=blue]{hyperref}
\usepackage{tikz}

\usetikzlibrary{shapes,arrows}

\pdfinfo
{
    /Title	(TLISP)
    /Subject	(TinyLISP Version 1.0)
    /Author	(Steffen Hieber)
}

\addtolength\topmargin{-27pt}
\addtolength\textheight{68pt}

\setlength{\parindent}{0pt}
\setlength{\parskip}{5pt plus 2pt minus 1pt}

\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}

\newcommand{\uu}[1]{\underline{#1}}

\pagestyle{headings}

\title{TinyLISP Version 1.0}
\author{Steffen Hieber}
\date{November 1992 -- \today}

\begin{document}
\maketitle
\tableofcontents
\newpage

\section{Vorwort}
Ich habe die erste Version von TLISP 1987 auf einem Commodore C128 entwickelt.
Das Betriebssystem war CP/M 3.0, die Forth-Version F83.

Mein damaliges Ziel, LISP zu erlernen, wurde mangels eines LISP-Interpreters
ein wenig erschwert, daher kam ich auf die Idee, mir einfach einen eigenen
LISP-Interpreter zu basteln. So entstand TLISP.

Da ich damals bei der Bundeswehr war, konnte ich nur an den Wochenenden ein
paar Stunden mit der Programmierung von TLISP verbringen.

Unmittelbar nach der Bundeswehr bin ich nach Erlangen gezogen, um an der
Friedrich-Alexander-Universit"at Erlangen-N"urnberg Informatik zu studieren.
Ich wei"s nicht, welcher Teufel mich geritten hat, aber kurz nach dem Umzug
nach Erlangen habe ich meinen Commodore C128 und alle CP/M-Disketten in die
M"ulltonne geworfen. Das war das Ende von TLISP.

In den n"achsten Jahren spukte mir immer wieder der Gedanke im Kopf herum,
TLISP neu zu programmieren, was ich dann auch des "ofteren ansatzweise
versucht habe. Ich war im Besitz einer DOS-Version von F83 und hatte auch
noch den generellen Aufbau der damaligen TLISP-Version im Kopf.

Irgendwie habe ich aber nie die n"otige Motivation dazu aufbringen k"onnen,
die Neuentwicklung von TLISP wirklich durchzuf"uhren.

Ich habe bereits mit dem Gedanken gespielt, TLISP in C oder C++ zu
programmieren, aber zumindest die Wiedergeburt von TLISP sollte in Forth
geschehen...

Jetzt ist es an der Zeit, TLISP unter Linux mit GNU Forth Version 0.3.0
neu zu entwickeln, wobei die Kompatibilit"at zu F83 gew"ahrleistet bleiben
soll.

\section{Einleitung}
TLISP ist ein einfacher, vollst"andig in Forth 83 geschriebener Interpreter
der Sprache LISP, wie ihn Prof.~Dr.~Dieter~M"uller~\cite{mu} beschreibt.

Dieses Skript ist kein Lehrbuch zu LISP oder Forth, die Lekt"ure von \cite{mu}
und \cite{ze} wird vorausgesetzt.

\section{Objektspeicher}

\section{Internes}
\subsection{PRIN}
\tikzstyle{fc_terminal} = [draw, rounded rectangle,node distance=3cm, minimum width=3cm,minimum height=2em]
\tikzstyle{fc_data} = [draw, trapezium, inner xsep=0pt,trapezium left angle=70, trapezium right angle=110, node distance=3cm,minimum height=4em]
\tikzstyle{fc_branch} = [draw, diamond, shape aspect=2, text width=4.5em, node distance=3cm, inner sep=0pt]
\tikzstyle{fc_operational} = [draw, rectangle, minimum height=4em]
\tikzstyle{line} = [draw, -triangle 45]
\begin{tikzpicture}[node distance = 2cm, auto, align=center]
    \node [fc_terminal] (start) {Start};
    \node [fc_branch, below of=start] (is_atom) {atom?};
    \node [fc_operational, right of=is_atom, node distance=9cm] (print_atom) {Atom ausgeben \\ PRIN1};
    \node [fc_data, below of=is_atom] (print_car) {Ausgabe \\ "`("' und "`car"'};
    \node [fc_operational, below of=print_car, node distance=3cm] (next) {Berechnung \\ cdr(last())};
    \node [fc_branch, below of=next] (is_nil) {nil?};
    \node [fc_data, right of=is_nil, node distance=5cm] (print_dot) {Ausgabe "`."' \\};
    \node [fc_data, below of=print_dot] (print_cdr) {Ausgabe \\ "`cdr"' und "`)"'};
    \node [fc_terminal, below of=print_cdr] (end) {Ende};
    \path [line] (start) -- (is_atom);
    \path [line] (is_atom) -- node [near start]{Ja}  (print_atom);
    \path [line] (is_atom) -- node [near start]{Nein}(print_car);
    \path [line] (print_car) -- (next);
    \path [line] (next) -- (is_nil);
    \path [line] (is_nil) -- node [near start]{Nein}  (print_dot);
    \path [line] (is_nil) |- node [near start]{Ja}    (print_cdr);
    \path [line] (print_dot) -- (print_cdr);
    \path [line] (print_atom) |- (end);
    \path [line] (print_cdr) -- (end);
\end{tikzpicture}

\section{Fragen}
\begin{enumerate}
\item Wie groß ist ein FCB? Warum hat B/FCB in F83 den Wert 42?
\item Warum dürfen Dateien unter DOS bei der BDOS-Funktion 15 (OPEN FILE)
      nicht schreibgeschützt sein?
\item Warum hat das ursprüngliche TFLOAD von R.~Zech auf dem C128 funktioniert?
\end{enumerate}

\section{Offene Punkte}
\begin{enumerate}
\item Minimierung der Verwendung des Return-Stacks durch Vermeidung von
      Rekursion und des Worts {\tt \textgreater R}; {\tt TESTS.LSP} muss
      unter F83 funktionieren.
      (Die aktuelle Ausnutzung nach Start liegt bei 61 Adressen, bei
      TESTS.LSP sogar bei 201 Adressen, siehe FREE)
\begin{verbatim}
      Status:       RECURSE         >R
                    -------         --
                    append          exec
                    (eval)          {mu/mod}
                    gc-walk         prog
                    pair            prog-go
                    prin            prog-return
                                    (read)
                                    >NUMBER
                                    OPEN-FILE
\end{verbatim}

\item Automatische GC bei LOAD
\item Dokumentation
\end{enumerate}

% Stichwortverzeichnis
\newpage
\renewcommand{\indexname}{Stichwortverzeichnis}
\addcontentsline{toc}{section}{\indexname}
\printindex

% Literaturverzeichnis
\nocite{*}
\newpage
\addcontentsline{toc}{section}{\refname}
\bibliography{tlisp}
\bibliographystyle{gerplain}

\end{document}
